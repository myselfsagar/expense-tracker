<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Expense Tracker</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="/css/userHome.css" />
    <script src="https://sdk.cashfree.com/js/v3/cashfree.js"></script>
  </head>

  <body class="page-background">
    <!-- Navigation Bar -->
    <nav class="main-navbar">
      <div class="nav-container">
        <div class="logo-container hidden" id="basicUserLogo">
          <a class="brand-logo" href="#"
            ><img src="/images/logo.jpg" alt="brand-logo" class="logo-image"
          /></a>
          <h2><span class="highlight-text">Expense</span> Tracker</h2>
        </div>
        <div class="logo-container hidden" id="premiumUserLogo">
          <a class="brand-logo" href="#"
            ><img
              src="/images/prmlogo.jpg"
              alt="premium-brand-logo"
              class="logo-image premium-logo"
          /></a>
          <h2><span class="highlight-text italic">Premium</span> ETracker</h2>
        </div>

        <button class="mobile-menu-toggle" id="mobileMenuToggle">
          <span class="toggle-icon"></span>
        </button>
        <div class="nav-menu" id="navMenu">
          <ul class="nav-list">
            <li class="nav-item">
              <a href="#" class="nav-link" id="profileLink">Profile</a>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link">Account</a>
            </li>
            <li class="nav-item">
              <a href="#home" class="nav-link">Home</a>
            </li>
            <li class="nav-item">
              <a href="/home" class="nav-link" id="logoutButton">Log Out</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="main-container">
      <div class="content-row">
        <!-- Profile Section -->
        <div class="profile-section" id="profileSection">
          <div class="profile-card">
            <div class="profile-header">
              <img
                src="http://randomuser.me/api/portraits/men/11.jpg"
                class="profile-image"
                alt="User profile"
              />
              <h2 id="userNameDisplay" class="profile-name">Jacob</h2>
              <h5 id="userEmailDisplay">jacob@gmail.com</h5>
              <h6 class="user-category" id="userCategoryDisplay">Basic user</h6>
            </div>
            <div class="profile-body">
              <ul class="menu-list">
                <div class="menu-group" id="menuTabs">
                  <a
                    class="menu-item active"
                    id="leaderboardTab"
                    href="#leaderboardContent"
                  >
                    <i class="fas fa-tachometer-alt menu-icon"></i>Leaderboard
                  </a>
                  <a
                    class="menu-item"
                    id="downloadHistoryTab"
                    href="#downloadHistoryContent"
                  >
                    <i class="fas fa-list menu-icon"></i>Download Expenses
                  </a>
                  <a class="menu-item" id="incomeTab" href="#incomeContent">
                    <i class="fas fa-coins menu-icon"></i>Income
                  </a>
                  <a class="menu-item" id="expensesTab" href="#expensesContent">
                    <i class="fas fa-money-bill-wave menu-icon"></i>Expenses
                  </a>
                </div>
              </ul>
            </div>
          </div>
        </div>

        <!-- Expense Form -->
        <div class="expense-form-section" id="expenseFormSection">
          <div class="expense-form-card">
            <div class="form-header">
              <h3>Add Your Expenses</h3>
            </div>
            <div class="form-body">
              <form id="expenseForm">
                <div class="form-group">
                  <label for="expenseCategory">Category</label>
                  <select class="form-control" id="expenseCategory" required>
                    <option disabled selected value="">
                      Select a Category
                    </option>
                    <option value="Housing">Housing</option>
                    <option value="Transportation">Transportation</option>
                    <option value="Food">Food</option>
                    <option value="Utilities">Utilities</option>
                    <option value="Healthcare">Healthcare</option>
                    <option value="Entertainment">Entertainment</option>
                    <option value="Shopping">Shopping</option>
                    <option value="Other">Other (specify below)</option>
                  </select>
                </div>

                <div class="form-group hidden" id="customCategoryGroup">
                  <label for="customCategory">Enter your Category</label>
                  <input
                    type="text"
                    class="form-control"
                    id="customCategory"
                    placeholder="Enter your custom category"
                  />
                </div>
                <div class="form-group">
                  <label for="expenseDescription">Description</label>
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Enter Description"
                    id="expenseDescription"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="expenseAmount">Amount</label>
                  <input
                    type="number"
                    class="form-control"
                    placeholder="Enter Amount"
                    id="expenseAmount"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="expenseDate">Date</label>
                  <input
                    type="date"
                    class="form-control"
                    id="expenseDate"
                    required
                  />
                </div>
                <div class="form-submit">
                  <button
                    type="submit"
                    class="submit-button"
                    id="submitExpenseButton"
                  >
                    Add Expense
                  </button>
                </div>
                <div class="alert-message success hidden" id="successMessage">
                  <span>Successfully added your expense.</span>
                </div>
                <div class="alert-message update hidden" id="updateMessage">
                  <span>Successfully updated your expense.</span>
                </div>
                <input type="hidden" id="expenseId" />
              </form>
            </div>
          </div>
        </div>

        <!-- Premium Content -->
        <div class="premium-content hidden" id="premiumContentSection">
          <div class="tab-content" id="premiumTabs">
            <!-- LeaderBoard -->
            <div class="tab-pane active" id="leaderboardContent">
              <div class="card premium-card" id="leaderboardCard">
                <div class="card-header">
                  <h3 class="card-title">LeaderBoard</h3>
                </div>
                <div class="card-body scrollable">
                  <ul class="leaderboard-list" id="leaderboardList">
                    <!-- Leaderboard items will be added here -->
                  </ul>
                </div>
              </div>
            </div>

            <!-- Download History -->
            <div class="tab-pane" id="downloadHistoryContent">
              <div class="card premium-card">
                <div class="card-header">
                  <button class="download-button" id="downloadExpensesButton">
                    Download Expenses
                  </button>
                </div>
                <div class="card-body scrollable">
                  <h5 class="section-title">Complete Download History</h5>
                  <ul class="download-history-list" id="downloadHistoryList">
                    <a class="history-item">Nothing downloaded yet</a>
                  </ul>
                </div>
              </div>
            </div>

            <div class="tab-pane" id="incomeContent">...income...</div>
            <div class="tab-pane" id="expensesContent">...expenses...</div>
          </div>
        </div>

        <!-- Advertisement -->
        <div class="advertisement-section hidden" id="advertisementSection">
          <div class="ad-card">
            <div class="ad-header">
              <h4>Premium Features</h4>
            </div>
            <div class="ad-body">
              <ul class="feature-list">
                <li class="feature-item">1. LeaderBoard</li>
                <li class="feature-item">2. Expense Filter</li>
                <li class="feature-item">3. Expense Reminders and Alerts</li>
                <li class="feature-item">4. Early Access to New Features</li>
                <li class="feature-item">5. Monthly/Yearly Reports</li>
                <li class="feature-item">6. Priority Customer Support</li>
                <li class="feature-item">7. Personalized Financial Advice</li>
              </ul>
            </div>
            <div class="ad-footer">
              <a href="#" class="nav-link" id="showPaymentModal">
                <button class="premium-button" id="buyPremiumButton">
                  Buy Premium
                </button>
              </a>
            </div>
          </div>
        </div>

        <!-- Expense Table -->
        <div class="expense-table-container" id="expenseTableContainer">
          <table class="expense-table" id="expenseTable">
            <div class="table-header-container">
              <h3 class="table-title">Expense Table</h3>
              <div class="update-info-group">
                <h3 class="table-update-info">
                  <span class="update-text">Last updated on </span>
                  <span class="update-date" id="lastUpdateDate"
                    >YYYY-MM-DD</span
                  >
                </h3>
                <i
                  class="fa-solid fa-circle-arrow-down download-btn hidden"
                  id="download-btn"
                  title="Download Expenses"
                  onclick="handleDownloadExpenses(event)"
                ></i>
              </div>
            </div>

            <thead class="table-header">
              <tr>
                <th>#</th>
                <th>Category</th>
                <th>Description</th>
                <th>Amount (₹)</th>
                <th>Date (YYYY-MM-DD)</th>
                <th>Edit</th>
                <th>Delete</th>
              </tr>
            </thead>
            <tbody id="expenseTableBody">
              <!-- Expense rows will be added here -->
            </tbody>
            <tfoot class="table-footer">
              <tr>
                <td colspan="3">Total Expense</td>
                <td id="totalExpenseAmount">₹</td>
                <td colspan="3"></td>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal-overlay hidden" id="paymentModal">
      <div class="modal-container">
        <div class="modal-content">
          <div class="modal-body">
            <div class="confirmation-message">
              <div class="confirmation-text" id="confirmationText"></div>
              <div class="button-group">
                <button
                  type="button"
                  class="proceed-button"
                  id="proceedToPayment"
                >
                  Proceed to payment
                </button>
                <button type="button" class="cancel-button" id="cancelPayment">
                  Cancel
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div class="pagination-container">
      <div class="pagination-controls">
        <div class="rows-selector">
          <span class="rows-text">Rows per page:</span>
          <select class="rows-select" id="rowsPerPage">
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
          </select>
        </div>
        <p id="expenseSummary"></p>
        <div class="page-buttons">
          <button class="page-button" id="previousPage">Previous</button>
          <button class="page-button current" id="currentPage">1</button>
          <button class="page-button" id="nextPage">Next</button>
        </div>
      </div>
    </div>

    <div class="spacer"></div>

    <footer class="main-footer">
      <div class="footer-content">
        <p>&copy; 2025 Sagar Tech. All rights reserved.</p>
      </div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="/js/userHome.js"></script>
    <script src="/js/premium.js"></script>
  </body>
</html>
